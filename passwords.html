<!DOCTYPE html>
<html>
<head>
	<title>PASSWORDS</title>
	<link rel="stylesheet" type="text/css" href="main.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
	<h1><img src="logo.png"></h1>
	<h2>PASSWORDS</h2>
	<div class="form">
		<form id="form">
			<input type="text" placeholder="new password title" class="redondeado" name="title" required id="title"><br><br>
			<input type="submit" onclick="create()" value="crear password">	
		</form>

	</div>
	<div>
	<div class="password"></div>
</body>

<script type="text/javascript">
	$("#form").submit(function(e){
		e.preventDefault();
	});
	var token = localStorage.getItem("token"); 
	var name = document.getElementById("title").value;
	//comprobar token

	$.ajax({
			url:"http://localhost:8888/server/public/api/passwords",
			type: "GET",

			headers:{
				'Authorization' : token
			},

			success: function(response){
				var passwords = response.passwords;
				var ids = response.ids;
				showPasswords(passwords, ids);
			},
			
			error: function() {
				console.log("Error :(");
			}
		});

	function create() { 
		
		$.ajax({
			url:"http://localhost:8888/server/public/api/categories",
			type: "POST",

			headers: {
				'Authorization': token
			},

			data:{
				'title': title,
			},

			success: function(response){
				var passwords = response.passwords;
				var ids = response.ids;
				showPasswords(passwords, ids);
			},
			
			error: function(response) {
				console.log(response.responseText);
			}
		});
	}


	function showPasswords(passwords, ids){ 
		
		for(var password in passwords) {
			$('#categoriesList').append('<div class="category">'+categories[category]+'<button id="categoriesbtn"' + ids[category]+'"onclick="deleteCategory('+ids[category]+')>Borrar</button></div><br>');
		}
	}

</script>
</html>
